"use strict";(self.webpackChunkmapasApp=self.webpackChunkmapasApp||[]).push([[161],{161:(z,v,s)=>{s.r(v),s.d(v,{MapasModule:()=>l});var m=s(895),M=s(322),i=s(898),o=s(256);class d{ngOnInit(){new i.Map({container:"mapa",style:"mapbox://styles/mapbox/streets-v11",center:[-3.618150555609441,40.159071910275806],zoom:20})}}d.\u0275fac=function(t){return new(t||d)},d.\u0275cmp=o.Xpm({type:d,selectors:[["app-full-screen"]],decls:1,vars:0,consts:[["id","mapa"]],template:function(t,e){1&t&&o._UZ(0,"div",0)},styles:["#mapa[_ngcontent-%COMP%]{width:100%;height:100%}"]});const C=["mapa"],b=function(a,t){return{"background-color":a,color:t}};function x(a,t){if(1&a){const e=o.EpF();o.TgZ(0,"div",5)(1,"button",6),o.NdJ("click",function(){const c=o.CHM(e).$implicit,_=o.oxw();return o.KtG(_.irMarcador(c))}),o._uU(2),o.qZA(),o.TgZ(3,"button",7),o.NdJ("click",function(){const c=o.CHM(e).index,_=o.oxw();return o.KtG(_.borrar(c))}),o._UZ(4,"i",8),o.qZA()()}if(2&a){const e=t.$implicit,n=t.index;o.xp6(1),o.Q6J("ngStyle",o.WLB(2,b,e.color,e.textColor)),o.xp6(1),o.hij(" Marker ",n+1," ")}}class u{constructor(){this.zoomLevel=15,this.center=[-3.618150555609441,40.159071910275806],this.marcadores=[]}ngAfterViewInit(){this.mapa=new i.Map({container:this.divMapa.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.center,zoom:this.zoomLevel}),this.leerLocalStorage()}irMarcador(t){this.mapa.flyTo({center:t.marker?.getLngLat()})}colorTexto(t){const e=parseInt(t.slice(1),16);return.299*(e>>16)+.587*((65280&e)>>8)+.114*(255&e)>160?"#000000":"#ffffff"}borrar(t){this.marcadores[t].marker?.remove(),this.marcadores.splice(t,1),this.guardarLocalStorage()}agregarMarcador(){const t="#xxxxxx".replace(/x/g,n=>(16*Math.random()|0).toString(16)),e=new i.Marker({draggable:!0,color:t}).setLngLat(this.center).addTo(this.mapa);this.marcadores.push({color:t,textColor:this.colorTexto(t),marker:e}),this.guardarLocalStorage(),e.on("dragend",()=>{this.guardarLocalStorage()})}guardarLocalStorage(){const t=[];this.marcadores.forEach(e=>{const{lng:n,lat:r}=e.marker.getLngLat();t.push({color:e.color,textColor:e.textColor,centro:[n,r]})}),localStorage.setItem("marcadores",JSON.stringify(t))}leerLocalStorage(){if(!localStorage.getItem("marcadores"))return;const t=JSON.parse(localStorage.getItem("marcadores"));t.forEach(e=>{const n=new i.Marker({color:e.color,draggable:!0}).setLngLat(e.centro).addTo(this.mapa);this.marcadores.push({marker:n,color:e.color,textColor:e.textColor}),n.on("dragend",()=>{this.guardarLocalStorage()})}),console.log(t)}}u.\u0275fac=function(t){return new(t||u)},u.\u0275cmp=o.Xpm({type:u,selectors:[["app-marcadores"]],viewQuery:function(t,e){if(1&t&&o.Gf(C,5),2&t){let n;o.iGM(n=o.CRH())&&(e.divMapa=n.first)}},decls:6,vars:1,consts:[[1,"list-group"],[1,"btn","btn-primary","mb-1",3,"click"],["class","btn-group mb-1","role","group",4,"ngFor","ngForOf"],[1,"mapa-container"],["mapa",""],["role","group",1,"btn-group","mb-1"],["type","button",1,"btn","btn-secondary",3,"ngStyle","click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0)(1,"button",1),o.NdJ("click",function(){return e.agregarMarcador()}),o._uU(2," + Agregar "),o.qZA(),o.YNc(3,x,5,5,"div",2),o.qZA(),o._UZ(4,"div",3,4)),2&t&&(o.xp6(3),o.Q6J("ngForOf",e.marcadores))},dependencies:[m.sg,m.PC],styles:[".mapa-container[_ngcontent-%COMP%]{width:100%;height:100%}.list-group[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:999}li[_ngcontent-%COMP%]{cursor:pointer}"]});const y=["mapa"];class g{ngAfterViewInit(){var t=new i.Map({container:this.divMapa.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.lngLat,zoom:15,interactive:!1});(new i.Marker).setLngLat(this.lngLat).addTo(t)}}function L(a,t){if(1&a&&(o.TgZ(0,"div",5)(1,"div",6),o._UZ(2,"app-mini-mapa",7),o.TgZ(3,"div",8)(4,"h5",9),o._uU(5),o.qZA(),o.TgZ(6,"p",10),o._uU(7),o.qZA()()()()),2&a){const e=t.$implicit;o.xp6(2),o.Q6J("lngLat",e.lngLat),o.xp6(3),o.Oqu(e.titulo),o.xp6(2),o.Oqu(e.descripcion)}}g.\u0275fac=function(t){return new(t||g)},g.\u0275cmp=o.Xpm({type:g,selectors:[["app-mini-mapa"]],viewQuery:function(t,e){if(1&t&&o.Gf(y,5),2&t){let n;o.iGM(n=o.CRH())&&(e.divMapa=n.first)}},inputs:{lngLat:"lngLat"},decls:2,vars:0,consts:[["mapa",""]],template:function(t,e){1&t&&o._UZ(0,"div",null,0)},styles:["div[_ngcontent-%COMP%]{width:100%;height:150px;margin:0}"]});class f{constructor(){this.propiedades=[{titulo:"Casa residencial, Canad\xe1",descripcion:"Bella propiedad en Katana, Canad\xe1",lngLat:[-75.92722289474008,45.280015511264466]},{titulo:"Casa de playa, M\xe9xico",descripcion:"Hermosa casa de playa en Acapulco, M\xe9xico",lngLat:[-99.91287720907991,16.828940930185748]},{titulo:"Apartamento, Argentina",descripcion:"Lujoso apartamento en el coraz\xf3n de Buenos Aires, Argentina",lngLat:[-58.430166677283445,-34.57150108832866]},{titulo:"Local comercial, Espa\xf1a",descripcion:"Local comercial disponible en Madrid, Espa\xf1a, cerca de El Jard\xedn Secreto.",lngLat:[-3.7112735618380177,40.42567285425766]}]}}f.\u0275fac=function(t){return new(t||f)},f.\u0275cmp=o.Xpm({type:f,selectors:[["app-propiedades"]],decls:11,vars:1,consts:[[1,"row","mt-3"],[1,"col-2"],[1,"col"],[1,"row"],["class","col-4 mb-2",4,"ngFor","ngForOf"],[1,"col-4","mb-2"],[1,"card"],[1,"card-img-top",3,"lngLat"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o._UZ(1,"div",1),o.TgZ(2,"div",2)(3,"h1"),o._uU(4,"Lista de propiedades"),o.qZA(),o._UZ(5,"hr"),o.qZA()(),o.TgZ(6,"div",3),o._UZ(7,"div",1),o.TgZ(8,"div",2)(9,"div",3),o.YNc(10,L,8,3,"div",4),o.qZA()()()),2&t&&(o.xp6(10),o.Q6J("ngForOf",e.propiedades))},dependencies:[m.sg,g],encapsulation:2});const Z=["mapa"];class h{constructor(){this.zoomLevel=20,this.center=[-3.618150555609441,40.159071910275806]}ngAfterViewInit(){this.mapa=new i.Map({container:this.divMapa.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.center,zoom:this.zoomLevel}),this.mapa.on("zoom",()=>{this.zoomLevel=this.mapa.getZoom()}),this.mapa.on("zoomend",()=>{this.mapa.getZoom()>18&&this.mapa.zoomTo(18)}),this.mapa.on("move",t=>{const{lng:e,lat:n}=t.target.getCenter();this.center=[e,n]})}ngOnDestroy(){this.mapa.off("zoom",()=>{}),this.mapa.off("zoomend",()=>{}),this.mapa.off("move",()=>{})}zoomIn(){this.mapa.zoomIn()}zoomOut(){this.mapa.zoomOut()}zoomCambio(t){this.mapa.zoomTo(Number(t))}}h.\u0275fac=function(t){return new(t||h)},h.\u0275cmp=o.Xpm({type:h,selectors:[["app-zoom-range"]],viewQuery:function(t,e){if(1&t&&o.Gf(Z,5),2&t){let n;o.iGM(n=o.CRH())&&(e.divMapa=n.first)}},decls:16,vars:13,consts:[[1,"mapa-container"],["mapa",""],[1,"row","fixed-bottom","m-4"],[1,"col-12"],[1,"form-label"],["type","range","id","customRange1","min","0","max","18",1,"form-range",3,"value","input"],["zoomInput",""],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary","float-end",3,"click"]],template:function(t,e){if(1&t){const n=o.EpF();o._UZ(0,"div",0,1),o.TgZ(2,"div",2)(3,"div",3)(4,"label",4),o._uU(5),o.ALo(6,"number"),o.ALo(7,"number"),o.ALo(8,"number"),o.qZA(),o.TgZ(9,"input",5,6),o.NdJ("input",function(){o.CHM(n);const c=o.MAs(10);return o.KtG(e.zoomCambio(c.value))}),o.qZA()(),o.TgZ(11,"div",3)(12,"button",7),o.NdJ("click",function(){return e.zoomOut()}),o._uU(13,"-"),o.qZA(),o.TgZ(14,"button",8),o.NdJ("click",function(){return e.zoomIn()}),o._uU(15,"+"),o.qZA()()()}2&t&&(o.xp6(5),o.lnq(" Zoom: ",o.xi3(6,4,e.zoomLevel,"2.0-2")," - Lng, Lat: [ ",o.xi3(7,7,e.center[0],"2.0-4"),", ",o.xi3(8,10,e.center[1],"2.0-4")," ] "),o.xp6(4),o.Q6J("value",e.zoomLevel))},dependencies:[m.JJ],styles:[".mapa-container[_ngcontent-%COMP%]{width:100%;height:100%}.row[_ngcontent-%COMP%]{background-color:#fff;padding:10px;border-radius:5px;z-index:9999;width:30%}"]});const T=[{path:"",children:[{path:"fullscreen",component:d},{path:"zoom-range",component:h},{path:"marcadores",component:u},{path:"propiedades",component:f},{path:"**",redirectTo:"fullscreen"}]}];class p{}p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=o.oAB({type:p}),p.\u0275inj=o.cJS({imports:[M.Bz.forChild(T),M.Bz]});class l{}l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=o.oAB({type:l}),l.\u0275inj=o.cJS({imports:[m.ez,p]})}}]);